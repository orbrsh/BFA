<html lang="en-US">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport"
	content="initial-scale=1, maximum-scale=1, user-scalable=no">

<title>BooksForAll</title>

<!-- Optional - Google font -->
<link rel="stylesheet"
	href="http://fonts.googleapis.com/css?family=Gafata">


<!-- Bootstrap CSS -->
<link rel="stylesheet"
	href="lib/bootstrap-3.3.7-dist/css/bootstrap.min.css">

<!-- Required - Form style -->
<link rel="stylesheet" href="css/style.css">

<!-- jQuery -->
<script src="lib/jquery-3.2.1.min.js"></script>

<!-- Bootstrap JS -->
<script src="lib/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

<!-- JavaScript Code -->
<script>
	$(document).ready(function() {
		
		function wordCount( val ){
		    return val.match(/\S+/g).length;
		}
		
		
		<!--Name can't be blank function called on user input-->
		$('#username').on('input', function() {
			var input=$(this);
			var is_username=input.val();
			if(is_username && is_username.length < 11 ){
				input.removeClass("invalid"); // remove invalid class
				$('#usernameE').fadeOut(500); // hide the error msg in 500ms
				}
			else if(is_username && is_username.length > 10){
				input.addClass("invalid"); // add invalid error class
				$('#usernameE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_username){
				input.addClass("invalid");
				$('#usernameE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		<!-- function called on user input -->
		$('#password').on('input', function() {
			var input=$(this);
			var is_pass=input.val();
			if(is_pass && is_pass.length < 9 ){
				input.removeClass("invalid"); // remove invalid class
				$('#passwordE').fadeOut(500); // hide the error msg in 500ms
				}
			else if(is_pass && is_pass.length > 8){
				input.addClass("invalid"); // add invalid error class
				$('#passwordE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_pass){
				input.addClass("invalid");
				$('#passwordE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		
		<!--nickname can't be blank & less than 10 function called on user input -->
		$('#nickname').on('input', function() {
			var input=$(this);
			var is_nickname=input.val();
			if(is_nickname && is_nickname.length < 21 ){
				input.removeClass("invalid"); // remove invalid class
				$('#nicknameE').fadeOut(500); // hide the error msg in 500ms
				}
			else if(is_nickname && is_nickname.length > 20){
				input.addClass("invalid"); // add invalid error class
				$('#nicknameE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_nickname){
				input.addClass("invalid");
				$('#nicknameE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		<!-- function called on user input checks if less than 50 -->
		$('#description').on('input', function() {
			var input=$(this);
			var is_desc=input.val();
			
			//if description word count is bigger than 50
			if(is_desc && wordCount(is_desc) > 50){
				input.addClass("invalid"); // add invalid error class
				$('#descriptionE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_desc || wordCount(is_desc) < 51){
				input.removeClass("invalid");
				$('#descriptionE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		
		<!-- function called on user input validate mail address -->
		$('#usermail').on('input', function() {
		var input=$(this);
		email_regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;
		if(!email_regex.test(input.val())){ alert('this is not valid email'); e.preventDefault(); return false;}
		});    
		
		<!-- function called on user input validate address --> //fares
		$('#usermail').on('input', function() {
		var input=$(this);
		
		});    
		
		<!-- function called on user input validate phone number --> //fares
		$('#usermail').on('input', function() {
		var input=$(this);
		
		});    

		<!-- After Form is Submitted Validate the inputs-->
		$("#RegisterButton").click(function(event){
			var form_data=$("#registerForm").serializeArray(); // Get All HTML objects inside the form
			var has_error=false;
			
			for (var input in form_data){ // loop over the objects
				var element=$("#"+form_data[input]['name']); // concatenate # to the form input name to get the object
				var invalid=element.hasClass("invalid");
				var error_element=$("#"+form_data[input]['name']+"E");
				if(element.attr('id') !="photourl" && element.attr('id') !="description"){ //can be empty
				if (invalid || !element.val() ){
					error_element.fadeIn(500); element.addClass("invalid"); has_error=true;
					}
				else{
					error_element.fadeOut(500);
				}
				
			}
				
			}
			if (has_error){
				event.preventDefault(); // prevent form from submitting
			}
			else{
				// create JavaScript object to send it to the server
				var user = new Object();
			    user.Username = $('#username').val();
			    user.Password = $('#password').val();
			    user.Nickname = $('#nickname').val();
				user.Phonenum = $('phonenum').val();
				user.Address = $('address').val();
			    user.Description = $('#description').val();
			    user.PhotoURL = $('#photourl').val();
				user.Usermail = $('#usermail').val();
			    user.Following_count = "0";
			    user.Follower_count = "0";
			    $.ajax({
			        url: "/BooksForAll/user/RegisterUser",
			        type: 'POST',
			        dataType: 'json',
			        data: JSON.stringify(user),
			        contentType: "application/json; charset=utf-8"
			    	})
					
			    	.done(function (data) {
			    		if(data.result == "registered"){
							console.log("registered");
							$('.alertUserExist').hide(); // hide error message
							$('.alertUserSuccess').fadeIn(500); // show message success
							window.location.pathname = "/BooksForAll/booksforall.html"; // send user to booksforall.HTML
			    		}
				        	else{ $('.alertUserSuccess').hide(); $('.alertUserExist').fadeIn(500); console.log("exist"); }
			    	 })
			    	 .fail( function (data) {
			    		 console.log(data);
			    	 });
			    	
				
			}
		});	
		
	});
		
	</script>

</head>

<body>
	<div class="container">

		<form class="well form-horizontal" action=" " method="post"
			id="contact_form">
			<fieldset>

				<!-- Form Name -->
				<legend>Registration</legend>

				<!-- Text input-->

				<div class="form-group">
					<label class="col-md-4 control-label">Full Name</label>
					<div class="col-md-4 inputGroupContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-user"></i></span> <input name="full_name"
								placeholder="Full Name" class="form-control" type="text">
						</div>
					</div>
				</div>

				<!-- Text input-->
				<div class="form-group">
					<label class="col-md-4 control-label">E-Mail</label>
					<div class="col-md-4 inputGroupContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-envelope"></i></span> <input name="email"
								placeholder="E-Mail Address" class="form-control" type="text">
						</div>
					</div>
				</div>


				<!-- Text input-->

				<div class="form-group">
					<label class="col-md-4 control-label">Phone #</label>
					<div class="col-md-4 inputGroupContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-earphone"></i></span> <input name="phone"
								placeholder="+972 55-1212121" class="form-control" type="text">
						</div>
					</div>
				</div>

				<!-- Text input-->

				<div class="form-group">
					<label class="col-md-4 control-label">State</label>
					<div class="col-md-4 inputGroupContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-home"></i></span> <input name="state"
								placeholder="state" class="form-control" type="text">
						</div>
					</div>
				</div>

				<!-- Select Basic -->

				<div class="form-group">
					<label class="col-md-4 control-label">City</label>
					<div class="col-md-4 selectContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-list"></i></span> <select name="state"
								class="form-control selectpicker">
								<option value=" ">Please select your city</option>
								<option>Haifa</option>
								<option>Tel Aviv</option>
							</select>
						</div>
					</div>
				</div>

				<div class="form-group">
					<label class="col-md-4 control-label">Street</label>
					<div class="col-md-4 inputGroupContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-home"></i></span> <input name="address"
								placeholder="Address" class="form-control" type="text">
						</div>
					</div>
				</div>

				<!-- Text input-->

				<div class="form-group">
					<label class="col-md-4 control-label">Zip Code</label>
					<div class="col-md-4 inputGroupContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-home"></i></span> <input name="zip"
								placeholder="Zip Code" class="form-control" type="text">
						</div>
					</div>
				</div>

				<!-- Text area -->

				<div class="form-group">
					<label class="col-md-4 control-label">Description</label>
					<div class="col-md-4 inputGroupContainer">
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-pencil"></i></span>
							<textarea class="form-control" name="comment"
								placeholder="Description"></textarea>
						</div>
					</div>
				</div>

				<!-- Success message -->
				<div class="alert alert-success" role="alert" id="success_message">
					Success <i class="glyphicon glyphicon-thumbs-up"></i> Thanks for
					registering
				</div>

				<!-- Button -->
				<div class="form-group">
					<label class="col-md-4 control-label"></label>
					<div class="col-md-4">
						<button type="submit" class="btn btn-warning">
							Submit <span class="glyphicon glyphicon-send"></span>
						</button>
					</div>
				</div>

			</fieldset>
		</form>
	</div>
	<div>
	<!-- /.container -->
	</div>
</body>
</html>
