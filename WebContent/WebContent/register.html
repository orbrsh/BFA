<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport"
	content="initial-scale=1, maximum-scale=1, user-scalable=no">

<title>BooksForAll</title>

<!-- Optional - Google font -->
<link rel="stylesheet"
	href="http://fonts.googleapis.com/css?family=Gafata">

<!-- Required - Form style -->
<link rel="stylesheet" href="css/style.css">

<!-- Latest compiled CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<style>
* {
        color: #000000;
        font-family: "Trebuchet MS", "Trebuchet", Arial, Helvetica, sans-serif;
        font-style: italic;
        font-weight:bold;
}

</style>
<!-- JavaScript Code -->
<script>
	$(document).ready(function() {
		
		function wordCount( val ){
		    return val.match(/\S+/g).length;
		}
		
		
		<!--UserName can't be blank function called on user input-->
		$('#validationTooltip01').on('input', function() {
			var input=$(this);
			var is_username=input.val();
			if(is_username && is_username.length < 11 ){
				input.removeClass("invalid"); // remove invalid class
				$('#usernameE').fadeOut(500); // hide the error msg in 500ms
				}
			else if(is_username && is_username.length > 10){
				input.addClass("invalid"); // add invalid error class
				$('#usernameE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_username){
				input.addClass("invalid");
				$('#usernameE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		
		<!-- function called on user input validate mail address -->
		$('#validationTooltip02').on('input', function() {
		var input=$(this);
		email_regex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i;
		if(!email_regex.test(input.val())){ alert('this is not valid email'); e.preventDefault(); return false;}
		});    
		
		<!-- function called on user input -->
		$('#validationTooltip03').on('input', function() {
			var input=$(this);
			var is_address=input.val();
			//TODO
			}
		);
		
		<!-- function called on user input -->
		$('#validationTooltip04').on('input', function() {
			var input=$(this);
			var is_phone=input.val();
			//TODO			
			}
		);
		
		<!-- function called on user input -->
		$('#validationTooltip05').on('input', function() {
			var input=$(this);
			var is_pass=input.val();
			if(is_pass && is_pass.length < 9 ){
				input.removeClass("invalid"); // remove invalid class
				$('#passwordE').fadeOut(500); // hide the error msg in 500ms
				}
			else if(is_pass && is_pass.length > 8){
				input.addClass("invalid"); // add invalid error class
				$('#passwordE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_pass){
				input.addClass("invalid");
				$('#passwordE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		
		<!--nickname can't be blank & less than 10 function called on user input -->
		$('#validationTooltip06').on('input', function() {
			var input=$(this);
			var is_nickname=input.val();
			if(is_nickname && is_nickname.length < 21 ){
				input.removeClass("invalid"); // remove invalid class
				$('#nicknameE').fadeOut(500); // hide the error msg in 500ms
				}
			else if(is_nickname && is_nickname.length > 20){
				input.addClass("invalid"); // add invalid error class
				$('#nicknameE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_nickname){
				input.addClass("invalid");
				$('#nicknameE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		
		<!-- function called on user input checks if less than 50 -->
		$('#validationTooltip07').on('input', function() {
			var input=$(this);
			var is_desc=input.val();
			
			//if description word count is bigger than 50
			if(is_desc && wordCount(is_desc) > 50){
				input.addClass("invalid"); // add invalid error class
				$('#descriptionE').fadeIn(500); // show the error msg in 500ms
				}
			else if(!is_desc || wordCount(is_desc) < 51){
				input.removeClass("invalid");
				$('#descriptionE').fadeOut(500); // hide the error msg in 500ms
			}
		});
		
		<!-- After Form is Submitted Validate the inputs-->
		$("#RegisterButton").click(function(event){
			var form_data=$("#registerForm").serializeArray(); // Get All HTML objects inside the form
			var has_error=false;
			
			for (var input in form_data){ // loop over the objects
				var element=$("#"+form_data[input]['name']); // concatenate # to the form input name to get the object
				var invalid=element.hasClass("invalid");
				var error_element=$("#"+form_data[input]['name']+"E");
				if(element.attr('id') !="photourl" && element.attr('id') !="description"){ //can be empty
				if (invalid || !element.val() ){
					error_element.fadeIn(500); element.addClass("invalid"); has_error=true;
					}
				else{
					error_element.fadeOut(500);
				}
				
			}
				
			}
			if (has_error){
				event.preventDefault(); // prevent form from submitting
			}
			else{
				// create JavaScript object to send it to the server
				var user = new Object();
			    user.Username = $('#validationTooltip01').val();
			    user.Usermail = $('#validationTooltip02').val();
			    user.Address = $('validationTooltip03').val();
			    user.Phonenum = $('validationTooltip04').val();
			    user.Password = $('#validationTooltip05').val();
			    user.Nickname = $('#validationTooltip06').val();
			    user.Description = $('#validationTooltip07').val();
				user.PhotoURL = $('#photourl').val();
			   
			    $.ajax({
			        url: "localhost:8080/BooksForAll/RegisterUser",
			        type: 'POST',
			        dataType: 'json',
			        data: JSON.stringify(user),
			        contentType: "application/json; charset=utf-8"
			    	})
					
			    	.done(function (data) {
			    		if(data.result == "registered"){
							console.log("registered");
							$('.alertUserExist').hide(); // hide error message
							$('.alertUserSuccess').fadeIn(500); // show message success
							window.location.pathname = "/BooksForAll/welcome.html"; // send user to welcome.HTML
			    		}
				        	else{ $('.alertUserSuccess').hide(); $('.alertUserExist').fadeIn(500); console.log("exist"); }
			    	 })
			    	 .fail( function (data) {
			    		 console.log(data);
			    	 });
			    	
				
			}
		});	
		
	});
		
	</script>

</head>

<body>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
  </ol>

  <!-- Wrapper for slides TODO-->
  <div class="carousel-inner">
    <div class="item active"> 
      <img src="images/library.jpg" alt="library">
    </div>

    <div class="item">
      <img src="images/library2.jpg" alt="library">
    </div>

  </div>

  <!-- Left and right controls -->
  <a class="left carousel-control" href="#myCarousel" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
    <span class="sr-only">Next</span>
  </a>


	<div class="container">

		<header class="header">
				<h1>Books For All</h1>
		</header>
		<div class="content">
		
			<article class="col-md-12">
					<div class="col-md-8 col-md-offset-2">
						<!-- START Registration form -->
						
						<div class="panel panel-form">
							<!-- Registration header -->
							<div class="panel-heading">
								<h2 class="title">Sign Up</h2>
								<p>Already have an account? <a href="index.html">Sign in</a>.</p>
							</div>
						</div>
								

				<!-- Form Name -->
					<form class="needs-validation" novalidate>
					<fieldset>
					<legend>Registration</legend>
					
					
				<!-- Text input-->
				
					<label for="validationTooltip01" class="control-label">User Name</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-user"></i></span>
							<input name="username" placeholder="User Name" class="form-control" id="validationTooltip01"
							type="text" required>
						</div>
						<p id="usernameE" class="notice">10 chars max</p>
						<div class="valid-tooltip">
        					Looks great
      					</div>
					<br>
					
				<!-- Text input-->
				
					<label for="validationTooltip02" class="control-label">E-Mail</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-envelope"></i></span> <input name="email"
								placeholder="someone@example.com" class="form-control" type="text" id="validationTooltip02" required>
						</div>
						<div class="valid-tooltip">
        					Please provide a valid mail
      					</div>
					<br>
					
				<!-- Text input-->

					<label for="validationTooltip03" class="control-label">Address</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-home"></i></span> <input name="address"
								placeholder="16, Yafo Street 94142 JERUSALEM ISRAEL"
								class="form-control" type="text" id="validationTooltip03" required>
						</div>
						<div class="valid-tooltip">
							Please provide a valid address
							<br>
        					{street address} {zip/postal code} {city/state} {country}
      					</div>
					<br>
		
				<!-- Text input-->
						
					<label for="validationTooltip04" class="control-label">Phone #</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-phone"></i></span>
								<input name="phone" placeholder="+972 55-1212121" class="form-control" id="validationTooltip04" type="text" required>
						</div>	
						<div class="valid-tooltip">
        					Please provide a valid phone #
      					</div>	
					<br>
					
				<!-- Text input-->
				
					<label for="validationTooltip05" class="control-label">Password</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-user"></i></span>
							<input name="password" placeholder="Password" class="form-control" id="validationTooltip05"
							type="text" required>
						</div>
						<p id="passwordE" class="notice">8 chars max</p>
						<div class="valid-tooltip">
        					Please provide a valid password
      					</div>
					<br>
					
				<!-- Text input-->

					<label for="validationTooltip06" class="control-label">User nickname</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-user"></i></span>
							<input name="nickname" placeholder="User nickname" class="form-control" id="validationTooltip06"
							type="text" required>
						</div>
						<p id="nicknameE" class="notice">20 chars max</p>
						<div class="valid-tooltip">
        					Looks good!
      					</div>
					<br>
					
				<!-- Text area -->

					<label for="validationTooltip07" class="control-label">Description</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-pencil"></i></span>
							<textarea class="form-control" name="description"
								placeholder="Description" id="validationTooltip07"></textarea>
						</div>
						<p id="descriptionE" class="notice">50 chars max</p>
					<br>

				<!-- Photo URL -->
				
					<label for="photourl" class="control-label">Photo URL</label>
						<div class="input-group">
							<span class="input-group-addon"><i
								class="glyphicon glyphicon-picture"></i></span>
							<input type="text" class="form-control" name="photourl" id="photourl">
						</div>
						<p id="photourlE" class="notice">Invalid URL</p>
					<br>
											
				<!-- Registration button -->
				</fieldset>
					<div class="form-group text-center">
						<button id="RegisterButton" type="button" class="btn btn-primary btn-block">Create Account</button>
					</div>
									
	</form>			
				</div>
				</article>


				<div class="clearfix"></div>
	
	</div>
	
	</div>
</div>
</body>
</html>